(function(){const PREVIEW_ITEM_WIDTH=parseInt('205');const PREVIEW_ITEM_GAP=parseInt('30');const{useState}=window.TC;let interval=null;const[totalBannerCount,setTotalBannerCount]=useState(0);const[activeBannerIndex,setActiveBannerIndex]=useState(0);function handleContentColor(){function handler(){const bannerContent=document.querySelector('#banner__container .banner__content');if(!bannerContent)return;if(window.innerWidth>576){bannerContent.classList.add('text-light');}else{bannerContent.classList.remove('text-light');}}
handler();window.addEventListener('resize',handler);}
function initializeCarousel(){const bannerContainer=document.getElementById('banner__container');if(!bannerContainer)return;setTotalBannerCount(parseInt(bannerContainer.dataset.bannerCount??''));if(totalBannerCount.value<2)return;interval=setInterval(()=>{setActiveBannerIndex(Math.max(0,activeBannerIndex.value===(totalBannerCount.value-1)?0:activeBannerIndex.value+1));},5000);}
function handlePreviewItemClick(){const items=document.querySelectorAll('#banner__preview .preview');items.forEach(item=>item.addEventListener('click',()=>{setActiveBannerIndex(parseInt(item.dataset.index??''));clearInterval(interval);}));}
document.addEventListener('DOMContentLoaded',()=>{activeBannerIndex.onChange=value=>{const currentActivePreviewItem=document.querySelector('#banner__preview .preview.active');const nextActivePreviewItem=document.querySelector(`#banner__preview .preview[data-index="${value}"]`);const bannerSlider=document.getElementById('banner__slider');const previewSlider=document.getElementById('banner-preview__slider');if(!currentActivePreviewItem||!nextActivePreviewItem||!bannerSlider||!previewSlider)return;const itemPercentage=100 / totalBannerCount.value;bannerSlider.style.transform=`translateX(-${itemPercentage * value}%)`;const maxTranslate=totalBannerCount.value>2?(totalBannerCount.value-3)*(PREVIEW_ITEM_WIDTH+PREVIEW_ITEM_GAP):0;const minTranslate=Math.max((value-1)*(PREVIEW_ITEM_WIDTH+PREVIEW_ITEM_GAP),0);previewSlider.style.transform=`translateX(-${Math.min(minTranslate, maxTranslate)}px)`;currentActivePreviewItem.classList.remove('active');nextActivePreviewItem.classList.add('active');}
totalBannerCount.onChange=value=>{const bannerContainer=document.getElementById('banner__container');const bannerSlider=document.getElementById('banner__slider');if(!bannerContainer||!bannerSlider)return;bannerSlider.style.width=`${value * 100}%`;const previewSlider=document.getElementById('banner-preview__slider');if(previewSlider){previewSlider.style.width=`${(PREVIEW_ITEM_WIDTH * value) + (PREVIEW_ITEM_GAP * (value + 1))}px`;}
bannerContainer.classList.add('visible');};handleContentColor();handlePreviewItemClick();initializeCarousel();});})();