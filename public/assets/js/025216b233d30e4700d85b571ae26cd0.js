(function(){function handleLoadMoreClick(){const buttons=document.querySelectorAll(`.list__load-more`);if(!buttons.length)return;buttons.forEach(button=>{button.addEventListener('click',async()=>{const container=button.closest('.ctype-iffcomponents_list');const listContainer=container.querySelector('.list-container');if(!container||!listContainer||container.classList.contains('loading'))return;container.classList.add('loading');const{offset}=button.dataset;const response=await fetch('?type=30112022',{method:'POST',body:JSON.stringify({offset:parseInt(offset),contentId:getUidFromContainer(container)})});const responseData=await response.json();if(response.status!==200)return;if(!responseData.count||responseData.count<=responseData.limit){button.classList.add('hidden');}else{button.classList.remove('hidden');button.setAttribute('data-offset',responseData.limit);}
listContainer.innerHTML=listContainer.innerHTML+responseData.html;container.classList.remove('loading');});});}
function getUidFromContainer(container){const{id}=container;return parseInt(id.replace('c',''));}
document.addEventListener('DOMContentLoaded',function(){handleLoadMoreClick();});})();