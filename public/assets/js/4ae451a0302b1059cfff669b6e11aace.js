(function(){function initializeScrollElements(){const scrollElements=document.querySelectorAll("[data-scroll-effect]");function handler(){scrollElements.forEach(element=>{const{scrollEffect}=element.dataset;switch(scrollEffect){case"zoom":{return setZoomForScroll(element);}
case"parallax":{return setParallaxForScroll(element);}
case"translate":{return setTranslateForScroll(element);}
case"fade":{return setFadeForScroll(element);}}});}
handler();window.addEventListener("scroll",handler);}
function setFadeForScroll(element){const scrollPercentage=getScrollPercentage(element);const effectStartPercentage=getNumberFromData(element,"effectStartPercentage");const effectEndPercentage=getNumberFromData(element,"effectEndPercentage");const relativePercentage=Math.round(Math.min(100,Math.max(0,((scrollPercentage-effectStartPercentage)/(effectEndPercentage-effectStartPercentage))*100)));if(relativePercentage>20){element.classList.add("interactable");}else{element.classList.remove("interactable");}
element.style.opacity=`${relativePercentage}%`;}
function setTranslateForScroll(element){const scrollPercentage=getScrollPercentage(element);const effectStartValue=getNumberFromData(element,"effectStartValue");const effectEndValue=getEffectEndValue(element);const effectStartPercentage=getNumberFromData(element,"effectStartPercentage");const effectEndPercentage=getNumberFromData(element,"effectEndPercentage");const relativePercentage=Math.round(Math.min(100,Math.max(0,((scrollPercentage-effectStartPercentage)/(effectEndPercentage-effectStartPercentage))*100)));const relativeValue=effectStartValue+(relativePercentage / 100)*(effectEndValue-effectStartValue);element.style.transform=`translateY(${relativeValue}px)`;}
function setParallaxForScroll(element){const scrollPercentage=getScrollPercentage(element);const effectEndValue=getEffectEndValue(element);const topPercent=effectEndValue*(1-scrollPercentage / 100);element.style.transform=`scale(${100 + effectEndValue * 2}%) translateY(${topPercent > 0 ? `-${topPercent}` : Math.abs(topPercent)}%)`;}
function setZoomForScroll(element){const scrollPercentage=getScrollPercentage(element);const effectEndValue=getEffectEndValue(element);const scalePercent=effectEndValue*scrollPercentage / 100+100;element.style.transform=`scale(${scalePercent}%)`;}
function getNumberFromData(element,name){return parseInt(element.dataset[name]??"");}
function getEffectEndValue(element){return getNumberFromData(element,"effectEndValue");}
function getScrollPercentage(element){const parent=element.closest(element.dataset.effectParent);if(!parent)return 0;const currentScroll=window.scrollY;const viewHeight=window.innerHeight;const{height}=parent.getBoundingClientRect();const top=getOffsetTop(parent);const scrollBottom=viewHeight+currentScroll;const parentBottom=top+height;const startPercentage=Math.max(0,Math.min(100,(viewHeight-top)/ parentBottom*100));const scrollPercentage=Math.max(0,Math.min(100,(scrollBottom-top)/(parentBottom-top)*100));return Math.round((scrollPercentage-startPercentage)/(100-startPercentage)*100);}
function getOffsetTop(elem){let offsetTop=0;do{if(!isNaN(elem.offsetTop)){offsetTop+=elem.offsetTop;}}while(elem=elem.offsetParent);return offsetTop;}
function initializeProgressBar(){const progressBar=document.getElementById("immersive-progress-bar");if(!progressBar)return;function handler(){const currentScroll=window.scrollY;if(currentScroll<100){progressBar.classList.add("visible");}else{progressBar.classList.remove("visible");}
const links=progressBar.querySelectorAll("a");const reversed=[...links].reverse();for(const link of reversed){const target=document.getElementById(link.href.split("#")[1]);if(!target)continue;if(currentScroll+window.innerHeight>target.offsetTop){link.classList.add("active");link.parentNode.childNodes.forEach(sibling=>{if(sibling!==link)sibling.classList.remove("active");});break;}}}
handler();window.addEventListener("scroll",handler);}
function initializeScrollIndicator(){const scrollIndicator=document.querySelector("#immersive-progress-bar .scroll-indicator");const footer=document.querySelector("footer");if(!scrollIndicator||!footer)return;function handler(){const currentScroll=window.scrollY;const viewHeight=window.innerHeight;const scrollPercentage=Math.max(0,Math.min(100,currentScroll /(footer.offsetTop-viewHeight)*100));scrollIndicator.style.width=`${scrollPercentage}%`;}
handler();window.addEventListener("scroll",handler);}
function handleQuoteControlButtonClick(){const buttons=document.querySelectorAll(".quote__control-button");buttons.forEach(button=>{const component=button.closest(".i-component");if(!component)return;const media=component.querySelector(".quote__media");const audio=component.querySelector("audio");if(!media||!audio)return;const blocks=[...component.querySelectorAll("span[data-start]")].reverse();let interval;audio.addEventListener("pause",()=>{media.dataset.playing="false";audio.currentTime=0;clearInterval(interval);blocks.forEach(block=>block.classList.remove("active"));});audio.addEventListener("play",()=>{media.dataset.playing="true";interval=setInterval(()=>{const timestamp=Math.round(audio.currentTime*1000);const active=blocks.find(block=>timestamp>=parseInt(block.dataset.start));active.classList.add("active");},50);});button.addEventListener("click",()=>{const playing=media.dataset.playing==="true";playing?audio.pause():audio.play();});});}
function initializeSmoothAnchorLinks(){document.querySelectorAll(`a[href^="#"]`).forEach(anchor=>{anchor.addEventListener("click",function(e){e.preventDefault();document.querySelector(this.getAttribute("href")).scrollIntoView({behavior:"smooth"});});});}
function setActiveOffsetElements(container,index){container.querySelectorAll(".active").forEach(element=>element.classList.remove("active"));const elements=container.querySelectorAll(`[data-index="${index}"]`);elements.forEach(element=>element.classList.add("active"));TC.animations.animateElements();}
function initializeTwoColumnLayoutOffsets(){const containers=document.querySelectorAll(`.i-component[data-type="two-column-layout"] [data-active-index]`);containers.forEach(container=>{const{activeIndex,total}=container.dataset;setActiveOffsetElements(container,activeIndex);const backControl=container.querySelector(".column__controls div:first-child");const forwardControl=container.querySelector(".column__controls div:last-child");if(!backControl||!forwardControl)return;backControl.addEventListener("click",()=>{const{activeIndex}=container.dataset;const newActiveIndex=Math.max(0,parseInt(activeIndex)-1).toString();container.dataset.activeIndex=newActiveIndex;setActiveOffsetElements(container,newActiveIndex);});forwardControl.addEventListener("click",()=>{const{activeIndex}=container.dataset;const newActiveIndex=Math.min(parseInt(total)-1,parseInt(activeIndex)+1).toString();container.dataset.activeIndex=newActiveIndex;setActiveOffsetElements(container,newActiveIndex);});});}
function initializeTwoColumnLayeredAligned(){const containers=document.querySelectorAll(`.i-component[data-type="two-column-layout"].scroll-layered`);const heightFactor=1.25;containers.forEach((container)=>{const{blockCount}=container.dataset;const outerWrapper=container.firstChild;const scrollWrapper=container.querySelector(".scroll-wrapper");if(!parseInt(blockCount)||!outerWrapper||!scrollWrapper)return;outerWrapper.style.height=`${scrollWrapper.clientHeight * (parseInt(blockCount) * heightFactor)}px`;outerWrapper.style.marginTop=`${scrollWrapper.clientHeight / 2}px`;const isMobile=window.innerWidth<=768;const contentWrapper=container.querySelector(".column__content > div");const endTranslate=-(contentWrapper.scrollHeight-(contentWrapper.clientHeight / 2));const startBase=Math.round((container.clientHeight-outerWrapper.clientHeight+scrollWrapper.clientHeight)/ container.clientHeight*100);const endBase=Math.round((outerWrapper.clientHeight+(scrollWrapper.clientHeight / 2))/ container.clientHeight*100);contentWrapper.dataset.scrollEffect="translate";contentWrapper.dataset.effectParent=".i-component";contentWrapper.dataset.effectStartValue=isMobile?"0":(contentWrapper.clientHeight / 2).toString();contentWrapper.dataset.effectEndValue=endTranslate.toString();contentWrapper.dataset.effectStartPercentage=startBase.toString();contentWrapper.dataset.effectEndPercentage=endBase.toString();const medias=container.querySelectorAll(".column__image, .column__video");const baseDiff=endBase-startBase;medias.forEach((media,index)=>{media.dataset.scrollEffect="fade";media.dataset.effectParent=".i-component";if(index===0){media.dataset.effectStartPercentage="0";media.dataset.effectEndPercentage="1";}else{media.dataset.effectStartPercentage=Math.round(startBase+baseDiff /(parseInt(blockCount)-1)*(index-1)).toString();media.dataset.effectEndPercentage=Math.round(startBase+baseDiff /(parseInt(blockCount)-1)*index).toString();}});});}
function initializeTwoColumnVideoControls(){const videoControls=document.querySelectorAll(".video__controls-wrapper");videoControls.forEach(elem=>{const wrapper=elem.parentNode;const video=wrapper.querySelector("video");video.addEventListener("play",()=>{wrapper.dataset.playing="true";});video.addEventListener("pause",()=>{wrapper.dataset.playing="false";});elem.addEventListener("click",()=>{if(wrapper.dataset.playing==="true"){video.pause();return;}
video.play();});});}
function initializeSectionTransitions(){const sections=document.querySelectorAll("#content > section");sections.forEach((section,index)=>{const{transition}=section.dataset;const prevSection=index===0?document.getElementById("immersive-banner"):sections.item(index-1);if(!prevSection)return;if(transition==="standard")return;if(transition==="replace"){prevSection.style.height=`${prevSection.clientHeight + window.innerHeight}px`;prevSection.style.marginBottom=`-${window.innerHeight}px`;}
if(transition==="reveal"){section.style.zIndex=(parseInt(window.getComputedStyle(prevSection).zIndex||"0")-1).toString();section.style.marginTop=`-${window.innerHeight}px`;const backgroundWrapper=section.querySelector(".section__background-wrapper");if(backgroundWrapper){const spacingComponent=document.createElement("div");spacingComponent.classList.add("i-component");backgroundWrapper.after(spacingComponent);}else{section.style.paddingTop=`${window.innerHeight}px`;}}});}
function initializeContent(){TC.animations.init({duration:600,once:true});document.body.classList.add("initialized");}
document.addEventListener("DOMContentLoaded",function(){initializeSmoothAnchorLinks();initializeProgressBar();initializeScrollIndicator();initializeTwoColumnLayoutOffsets();initializeTwoColumnLayeredAligned();initializeSectionTransitions();initializeScrollElements();initializeContent();handleQuoteControlButtonClick();initializeTwoColumnVideoControls();});}());